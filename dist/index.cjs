'use strict';var logger=require('@minejs/logger');var i=new logger.Logger("debug",true,"[CruxJS]");var a=class{constructor(){}mergeRoutes(e=[],t=[]){let o=[...e],n=new Set(e.map(s=>`${s.method}:${s.path}`));for(let s of t){let r=`${s.method}:${s.path}`;n.has(r)?i.debug(`Skipping plugin route ${r} (overridden by user)`):o.push(s);}return o}mergeSchemas(e=[],t=[]){let o=[...e],n=new Set(e.map(s=>s.name));for(let s of t)n.has(s.name)?i.debug(`Skipping plugin schema ${s.name} (overridden by user)`):o.push(s);return o}mergeStatic(e=[],t=[]){return [...e,...t]}};var c=class{constructor(){this.plugins=[];}async register(e,t){i.debug(`Registering plugin: ${e.name}`),this.plugins.push(e),e.onRegister&&await e.onRegister(t),i.debug(`Plugin registered: ${e.name} v${e.version}`);}getAll(){return this.plugins}async callHook(e,t){for(let o of this.plugins)o[e]&&(i.debug(o.name,`Calling ${e}`),await o[e](t));}collectRoutes(){let e=[];for(let t of this.plugins)t.routes&&(e.push(...t.routes),i.debug(t.name,`Provided ${t.routes.length} routes`));return e}collectSchemas(){let e=[];for(let t of this.plugins)t.schemas&&(e.push(...t.schemas),i.debug(t.name,`Provided ${t.schemas.length} schemas`));return e}collectMiddlewares(){let e=new Map;for(let t of this.plugins)if(t.middlewares)for(let o of t.middlewares)e.set(`${t.name}:${o.name}`,o.handler),i.debug(t.name,`Provided middleware: ${o.name}`);return e}collectStatic(){let e=[];for(let t of this.plugins)t.static&&(e.push(...t.static),i.debug(t.name,`Provided ${t.static.length} static configs`));return e}};exports.PluginRegistry=c;exports.ResourceMerger=a;exports.logger=i;//# sourceMappingURL=index.cjs.map
//# sourceMappingURL=index.cjs.map