import {Logger}from'@minejs/logger';var p=new Logger("debug",true,"[CruxJS]");var n=class{constructor(e){this.logger=e;}mergeRoutes(e=[],t=[]){let o=[...e],s=new Set(e.map(i=>`${i.method}:${i.path}`));for(let i of t){let r=`${i.method}:${i.path}`;s.has(r)?this.logger.info(`Skipping plugin route ${r} (overridden by user)`):o.push(i);}return o}mergeSchemas(e=[],t=[]){let o=[...e],s=new Set(e.map(i=>i.name));for(let i of t)s.has(i.name)?this.logger.info(`Skipping plugin schema ${i.name} (overridden by user)`):o.push(i);return o}mergeStatic(e=[],t=[]){return [...e,...t]}};var g=class{constructor(e){this.plugins=[];this.logger=e;}async register(e,t){this.logger.info(`Registering plugin: ${e.name}`),this.plugins.push(e),e.onRegister&&await e.onRegister(t),this.logger.debug(`Plugin registered: ${e.name} v${e.version}`);}getAll(){return this.plugins}async callHook(e,t){for(let o of this.plugins)o[e]&&(this.logger.debug(o.name,`Calling ${e}`),await o[e](t));}collectRoutes(){let e=[];for(let t of this.plugins)t.routes&&(e.push(...t.routes),this.logger.debug(t.name,`Provided ${t.routes.length} routes`));return e}collectSchemas(){let e=[];for(let t of this.plugins)t.schemas&&(e.push(...t.schemas),this.logger.debug(t.name,`Provided ${t.schemas.length} schemas`));return e}collectMiddlewares(){let e=new Map;for(let t of this.plugins)if(t.middlewares)for(let o of t.middlewares)e.set(`${t.name}:${o.name}`,o.handler),this.logger.debug(t.name,`Provided middleware: ${o.name}`);return e}collectStatic(){let e=[];for(let t of this.plugins)t.static&&(e.push(...t.static),this.logger.debug(t.name,`Provided ${t.static.length} static configs`));return e}};export{g as PluginRegistry,n as ResourceMerger,p as logger};//# sourceMappingURL=index.js.map
//# sourceMappingURL=index.js.map